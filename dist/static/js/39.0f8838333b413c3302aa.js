webpackJsonp([39],{622:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(839),n=i(840),a=i(15),o=a(s.a,n.a,null,null,null);e.default=o.exports},839:function(t,e,i){"use strict";var s=i(179),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a={name:"onetime",components:{cSwitch:s.a},data:function(){return{fields:{popName:{label:"PoP"},expireTime:{label:'ExpireTime<i class="require">*</i>'},bypassYn:{label:"Bypass"},action:{label:"관리"}},items:[],originItems:[],history:{fields:{createId:{label:"등록/수정자",class:"text-left"},histBeginDateTime:{label:"등록/수정일시"},expireTime:{label:"ExpireTime",class:"text-right"},bypassYn:{label:"byPass"}},items:[],pageInfo:{page:1,size:10,totalCount:1}},isModalHistory:!1}},computed:{},created:function(){var t=this;this.$https.get("/policy/oneTimeUrl").then(function(e){t.items=e.data.items.map(function(t){return n({},t,{isEdit:!1})}),t.originItems=JSON.parse(JSON.stringify(t.items))})},methods:{onEdit:function(t){t.item.isEdit=!0},onView:function(t){var e=this.originItems[t.index];Object.keys(e).forEach(function(i){t.item[i]=e[i]}),t.item.isEdit=!1},onSubmit:function(t){var e=this,i=t.item,s=i.popId,a=i.expireTime,o=i.bypassYn,r=i.modifyHistReason;this.$https.put("/policy/oneTimeUrl/"+s,{expireTime:a,bypassYn:o,modifyHistReason:r}).then(function(){t.item.isEdit=!1,e.items[t.index]=t.item,e.originItems[t.index]=n({},t.item)}).catch(function(i){console.log(i),e.onView(t)})},setDefault:function(t,e){t[e]=""!==t[e]?parseInt(t[e]):0},showHistory:function(t){var e=this;this.isModalHistory=!this.isModalHistory,this.$https.get("/policy/oneTimeUrl/hist/"+t.item.popId).then(function(t){e.history.items=t.data.items,e.history.pageInfo.totalCount=t.data.items.length})}}}},840:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"animated fadeIn"},[i("section",{staticClass:"board"},[i("b-table",{attrs:{"show-empty":"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"expireTime",fn:function(e){return[e.item.isEdit?i("span",[i("cleave",{staticClass:"form-control",staticStyle:{width:"60px"},attrs:{options:{numeral:!0,numeralPositiveOnly:!0,numeralDecimalScale:0}},on:{input:function(i){t.setDefault(e.item,"expireTime")}},model:{value:e.item.expireTime,callback:function(i){t.$set(e.item,"expireTime",i)},expression:"row.item.expireTime"}}),t._v(" 초\n        ")],1):i("span",[t._v(t._s(e.value)+" 초")])]}},{key:"bypassYn",fn:function(e){return[e.item.isEdit?i("c-switch",{staticClass:"v-switch",attrs:{type:"text",on:"사용",off:"미사용"},model:{value:e.item.bypassYn,callback:function(i){t.$set(e.item,"bypassYn",i)},expression:"row.item.bypassYn"}}):i("span",{staticClass:"badge ins",class:{primary:e.value}},[t._v("\n          "+t._s(e.value?"사용":"미사용")+"\n        ")])]}},{key:"action",fn:function(e){return[e.item.isEdit?i("span",[i("b-button",{attrs:{type:"button",variant:"in-table"},on:{click:function(i){t.onView(e)}}},[t._v("취소")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"in-table"},on:{click:function(i){t.onSubmit(e)}}},[t._v("저장")])],1):i("span",[i("b-button",{attrs:{type:"button",variant:"in-table"},on:{click:function(i){t.showHistory(e)}}},[t._v("이력")]),t._v(" "),i("b-button",{attrs:{type:"button",variant:"in-table"},on:{click:function(i){t.onEdit(e)}}},[t._v("수정")])],1)]}}])})],1),t._v(" "),i("b-modal",{attrs:{size:"lg",title:"이력관리"},model:{value:t.isModalHistory,callback:function(e){t.isModalHistory=e},expression:"isModalHistory"}},[i("section",{staticClass:"board"},[i("b-table",{attrs:{"show-empty":"",items:t.history.items,fields:t.history.fields,"current-page":t.history.pageInfo.page,"per-page":t.history.pageInfo.size},scopedSlots:t._u([{key:"bypassYn",fn:function(e){return[t._v("\n          "+t._s(e.value?"사용":"미사용")+"\n        ")]}}])})],1),t._v(" "),i("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.history.pageInfo.totalCount,"per-page":t.history.pageInfo.size},model:{value:t.history.pageInfo.page,callback:function(e){t.$set(t.history.pageInfo,"page",e)},expression:"history.pageInfo.page"}}),t._v(" "),i("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[i("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.isModalHistory=!1}}},[t._v("확인")])],1)],1)],1)},n=[],a={render:s,staticRenderFns:n};e.a=a}});