webpackJsonp([22],{649:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(901),i=s(902),c=s(15),o=c(a.a,i.a,null,null,null);e.default=o.exports},901:function(t,e,s){"use strict";var a=s(179),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t};e.a={name:"serviceProcessing",props:["id"],components:{cSwitch:a.a},data:function(){return{name:"Service Processing 상세",originItems:{},items:{processId:null,taskIds:null,processSectionCodeName:null,processStateCodeName:null,processBeginDatetime:null,processEndDatetime:null,processTaskList:[{interlockTargetCode:"",interlockTargetCodeName:""}]},taskList:[],activeItems:{processTask:{},taskActivityList:[],edgeDetailList:null,edgeSummaryList:null,searchConditionServiceList:null,searchConditionServiceTypeList:null},summaryFields:{},summaryItems:[],summaryActiveItems:{},detailItems:[{popId:null,popName:null,popTotalQty:null,popEndQty:null,activityEdgePopList:[]}],searchItem:{serviceId:null,serviceTypeCode:null,taskActivityStateCode:null},taskName:null,isEdgeSummary:!1,edgeTabIndex:0,code:{serviceId:[],serviceTypeCode:[],taskActivityStateCode:[]},queryParams:{},isEdit:!1}},computed:{serviceId:{get:function(){var t=this;return this.code.serviceId.find(function(e){return e.serviceId===t.searchItem.serviceId})||null},set:function(t){this.searchItem.serviceId=null!==t?t.serviceId:null}},serviceTypeCode:{get:function(){var t=this;return this.code.serviceTypeCode.find(function(e){return e.serviceTypeCode===t.searchItem.serviceTypeCode})||null},set:function(t){this.searchItem.serviceTypeCode=null!==t?t.serviceTypeCode:null}},taskActivityStateCode:{get:function(){var t=this;return this.code.taskActivityStateCode.find(function(e){return e.code===t.searchItem.taskActivityStateCode})||null},set:function(t){this.searchItem.taskActivityStateCode=null!==t?t.code:null}}},created:function(){var t=this;this.$https.get("/system/commonCode",{q:{groupCode:"TASK_ACTIVE_STATE"}}).then(function(e){t.code.taskActivityStateCode=e.data.items}),this.$https.get("/serviceprocess/"+this.id).then(function(e){t.items=i({},t.items,e.data.items),t.taskList=t.items.taskIds.split(","),t.activeStep(0)})},methods:{activeStep:function(t){this.fetchActivity(this.taskList[t])},fetchActivity:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.queryParams=i({},this.queryParams,s),this.$https.get("/serviceprocess/"+this.id+"/tasks/"+t+"/activities",this.queryParams).then(function(t){e.activeItems=t.data.items,e.activeItems.taskActivityList=null!==e.activeItems.taskActivityList?e.activeItems.taskActivityList:[],e.setActiveItems()})},resetActivity:function(t){var e=this;Object.keys(this.searchItem).forEach(function(t){e.searchItem[t]=null}),this.fetchActivity(t,this.searchItem)},fetchEdge:function(t){var e=0===this.edgeTabIndex?"SUMMARY":"DETAIL";this.fetchActivity(t,{taskActivityViewType:e})},setActiveItems:function(){this.setTaskName(this.activeItems.processTask.interlockTargetCode),this.isEdgeSummary=null!==this.activeItems.edgeSummaryList||null!==this.activeItems.edgeDetailList,null!==this.activeItems.edgeSummaryList?this.setSummary():null!==this.activeItems.edgeDetailList&&this.setDetail()},setTaskName:function(t){this.taskName="INTERLOCK_TARGET_01"===t?"D":"INTERLOCK_TARGET_02"===t?"HR":"INTERLOCK_TARGET_03"===t?"LR":"INTERLOCK_TARGET_04"===t?"E":null},setSummary:function(){var t=this.activeItems.edgeSummaryList[0],e=t.activityEdgeServiceTypeList||[],s={};e.forEach(function(t,e){s["typeCode_"+e]={label:t.serviceTypeCodeName,class:"text-right"}}),this.summaryFields=i({serviceName:{label:"Service",class:"text-left"}},s,{serviceTotalQty:{label:"Total",class:"text-right"},serviceStateCodeName:{label:"상태"}}),this.summaryItems=this.activeItems.edgeSummaryList.map(function(t){return t.activityEdgeServiceTypeList.forEach(function(e,s){t["typeCode_"+s]='<a class="typeData" data-service="'+t.serviceId+'" data-type="'+e.serviceTypeCode+'">'+e.successQty+"/"+e.totalQty+"</a>"}),i({},t)})},setDetail:function(){this.detailItems=this.activeItems.edgeDetailList,0===this.code.serviceId.length&&(this.code.serviceId=this.activeItems.searchConditionServiceList),0===this.code.serviceTypeCode.length&&(this.code.serviceTypeCode=this.activeItems.searchConditionServiceTypeList)},onClickProcess:function(t,e){"INTERLOCK_TARGET_01"!==t&&(this.setTaskName(t),this.queryParams={},this.activeStep(e))},onTaskReset:function(t){var e=this;this.$https.put("/serviceprocess/"+this.id+"/tasks/"+t+"/retry").then(function(){e.$router.go(e.$router.currentRoute)}).catch(function(t){console.log(t)})},statusClass:function(t){var e="string"==typeof t?t.split("STATE_")[1]:"";return"01"===e?"st-ready":"02"===e?"st-process":"03"===e?"st-success":"04"===e?"st-danger":""}}}},902:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"animated fadeIn"},[s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.formDefault",modifiers:{formDefault:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),t._v("\n      기본정보\n    ")])],1),t._v(" "),s("b-collapse",{attrs:{id:"formDefault",visible:""}},[s("div",{staticClass:"formView"},[s("b-form-fieldset",{attrs:{label:"PID",horizontal:!0}},[s("b-form-input",{attrs:{value:t.id,type:"text",plaintext:""}})],1),t._v(" "),s("b-form-fieldset",{attrs:{label:"TID",horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.taskIds,type:"text",plaintext:""}})],1),t._v(" "),s("b-form-fieldset",{attrs:{label:"Process",horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.processSectionCodeName,type:"text",plaintext:""}})],1),t._v(" "),s("b-form-fieldset",{attrs:{label:"상태",horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.processStateCodeName,type:"text",plaintext:""}})],1),t._v(" "),s("b-form-fieldset",{attrs:{label:"시작일시",horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.processBeginDatetime,type:"text",plaintext:""}})],1),t._v(" "),s("b-form-fieldset",{attrs:{label:"종료일시",horizontal:!0}},[s("b-form-input",{attrs:{value:t.items.processEndDatetime,type:"text",plaintext:""}})],1)],1)]),t._v(" "),s("div",{staticClass:"collapse-title"},[s("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.detail",modifiers:{detail:!0}}],staticClass:"btn-collapse"},[s("i",{staticClass:"fa"}),t._v("\n      상세\n    ")])],1),t._v(" "),s("b-collapse",{attrs:{id:"detail",visible:""}},[s("b-card",{staticClass:"dashed mb-0"},[s("div",{staticClass:"process-group"},t._l(t.items.processTaskList,function(e,a){return s("div",{staticClass:"process-box",on:{click:function(s){t.onClickProcess(e.interlockTargetCode,a)}}},[s("div",{class:t.statusClass(e.taskStateCode)},[s("h5",[t._v(t._s(e.interlockTargetCodeName))]),t._v(" "),s("i",{staticClass:"fa",class:t.statusClass(e.taskStateCode)}),t._v(" "),"DNS"!==e.interlockTargetCodeName?s("div",{staticClass:"activeCount"},[s("span",{staticClass:"success"},[t._v(t._s(e.interlockSuccessQty))]),t._v(" /\n              "),s("span",[t._v(t._s(e.interlockTotalQty))])]):t._e()])])})),t._v(" "),s("div",{staticClass:"process-content"},[s("h3",{staticClass:"content-title"},[s("i",{staticClass:"fa fa-circle"}),t._v(" "+t._s(t.activeItems.processTask.interlockTargetCodeName))]),t._v(" "),s("div",{staticClass:"timeInfo"},[s("span",{staticClass:"mr-2"},[s("strong",[t._v("시작")]),t._v(": "+t._s(t.activeItems.processTask.taskBeginDatetime))]),t._v(" /\n          "),s("span",{staticClass:"ml-2"},[s("strong",[t._v("종료")]),t._v(": "+t._s(t.activeItems.processTask.taskEndDatetime))]),t._v(" "),"TASK_STATE_04"===t.activeItems.processTask.taskStateCode?s("b-button",{staticClass:"ml-2",attrs:{variant:"primary"},on:{click:function(e){t.onTaskReset(t.activeItems.processTask.taskId)}}},[t._v("재실행")]):t._e()],1),t._v(" "),s("div",{staticClass:"searchInfo"},["E"===t.taskName&&t.isEdgeSummary?s("b-tabs",{attrs:{pills:""},on:{input:function(e){t.fetchEdge(t.activeItems.processTask.taskId)}},model:{value:t.edgeTabIndex,callback:function(e){t.edgeTabIndex=e},expression:"edgeTabIndex"}},[s("b-tab",{attrs:{title:"Summary",active:""}},[s("section",{staticClass:"board"},[s("b-table",{attrs:{"show-empty":"",items:t.summaryItems,fields:t.summaryFields}})],1)]),t._v(" "),s("b-tab",{attrs:{title:"Detail"}},[s("b-form",{staticClass:"searchBox",attrs:{inline:""}},[s("label",[t._v("Service")]),t._v(" "),s("multiselect",{staticClass:"inline",attrs:{id:"taskSelect_"+t.activeItems.processTask.taskId,showLabels:!1,searchable:!1,options:t.code.serviceId,label:"serviceName","track-by":"serviceId",placeholder:"전체"},model:{value:t.serviceId,callback:function(e){t.serviceId=e},expression:"serviceId"}}),t._v(" "),s("label",[t._v("Service Type")]),t._v(" "),s("multiselect",{staticClass:"inline",attrs:{id:"taskSelect_"+t.activeItems.processTask.taskId,showLabels:!1,searchable:!1,options:t.code.serviceTypeCode,label:"serviceTypeCodeName","track-by":"serviceTypeCode",placeholder:"전체"},model:{value:t.serviceTypeCode,callback:function(e){t.serviceTypeCode=e},expression:"serviceTypeCode"}}),t._v(" "),s("label",[t._v("상태")]),t._v(" "),s("multiselect",{staticClass:"inline",attrs:{id:"taskSelect_"+t.activeItems.processTask.taskId,showLabels:!1,searchable:!1,options:t.code.taskActivityStateCode,label:"codeName","track-by":"code",placeholder:"전체"},model:{value:t.taskActivityStateCode,callback:function(e){t.taskActivityStateCode=e},expression:"taskActivityStateCode"}}),t._v(" "),s("div",{staticClass:"search-btn"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(e){t.resetActivity(t.activeItems.processTask.taskId)}}},[s("i",{staticClass:"icon-reload"})]),t._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.fetchActivity(t.activeItems.processTask.taskId,t.searchItem)}}},[s("i",{staticClass:"icon-magnifier"})])],1)],1),t._v(" "),t._l(t.detailItems,function(e,a){return s("div",{staticClass:"detailStatus d-flex"},[s("div",{staticClass:"pop"},[s("h6",[t._v(t._s(e.popName))]),t._v(" "),s("strong",[t._v(t._s(e.popEndQty))]),s("span",[t._v("/"+t._s(e.popTotalQty))])]),t._v(" "),s("div",{staticClass:"statusBoxWrap d-flex flex-wrap"},t._l(e.activityEdgePopList,function(e,a){return s("div",{staticClass:"statusBox",class:t.statusClass(e.taskActivityStateCode)},[s("h6",[t._v(t._s(e.hostName))])])}))])})],2)],1):t._e(),t._v(" "),"HR"===t.taskName||"LR"===t.taskName||"E"===t.taskName&&!t.isEdgeSummary?s("div",[s("b-form",{staticClass:"searchBox",attrs:{inline:""}},[s("label",[t._v("상태")]),t._v(" "),s("multiselect",{staticClass:"inline",attrs:{id:"taskSelect_"+t.activeItems.processTask.taskId,showLabels:!1,searchable:!1,options:t.code.taskActivityStateCode,label:"codeName","track-by":"code",placeholder:"전체"},model:{value:t.taskActivityStateCode,callback:function(e){t.taskActivityStateCode=e},expression:"taskActivityStateCode"}}),t._v(" "),s("div",{staticClass:"search-btn"},[s("b-button",{attrs:{type:"button",variant:"outline-secondary"},on:{click:function(e){t.resetActivity(t.activeItems.processTask.taskId)}}},[s("i",{staticClass:"icon-reload"})]),t._v(" "),s("b-button",{attrs:{type:"button",variant:"primary"},on:{click:function(e){t.fetchActivity(t.activeItems.processTask.taskId,{taskActivityStateCode:t.searchItem.taskActivityStateCode})}}},[s("i",{staticClass:"icon-magnifier"})])],1)],1),t._v(" "),s("div",{staticClass:"statusBoxWrap d-flex flex-wrap"},t._l(t.activeItems.taskActivityList,function(e,a){return s("div",{staticClass:"statusBox",class:t.statusClass(e.taskActivityStateCode)},[s("div",{staticClass:"names"},[s("h6",[t._v(t._s(e.popName))]),t._v(" "),s("span",[t._v(t._s(e.hostName))])])])}))],1):t._e()],1)])])],1),t._v(" "),s("div",{staticClass:"page-btn"},[s("b-button",{attrs:{type:"button","active-class":"",variant:"outline-secondary",to:{name:"Service Processing 관리"}}},[t._v("목록")])],1)],1)},i=[],c={render:a,staticRenderFns:i};e.a=c}});